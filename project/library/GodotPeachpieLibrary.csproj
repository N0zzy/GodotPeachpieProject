<Project Sdk="Peachpie.NET.Sdk/1.2.0-r17054">
    <PropertyGroup>
        <TargetFramework>net7.0</TargetFramework>
        <TargetFramework Condition=" '$(GodotTargetPlatform)' == 'android' ">net7.0</TargetFramework>
        <TargetFramework Condition=" '$(GodotTargetPlatform)' == 'ios' ">net8.0</TargetFramework>
        <OutputType>Library</OutputType>
        <EnableDynamicLoading>true</EnableDynamicLoading>
        <Configurations>Debug</Configurations>
        <GeneratePackageOnBuild>true</GeneratePackageOnBuild>
        <PackageId>$(MSBuildProjectName)</PackageId>
        <Version>1.0.0</Version>
        <Authors>$(MSBuildProjectName)</Authors>
        <Description>$(MSBuildProjectName)</Description>
        <DocumentationFile>bin\$(Configuration)\$(TargetFramework)\$(MSBuildProjectName).xml</DocumentationFile>
        <PackageOutDir>..\..\</PackageOutDir>
        <NoWarn>NU5104</NoWarn>
    </PropertyGroup>
    
    <ItemGroup>
        <PackageReference Include="GodotSharp" Version="$(GodotBuildVersion)" />
        <ProjectReference Include="..\..\support\library\GPL.csproj" />
    </ItemGroup>
    <ItemGroup>
        <Compile Include="**/*.php" />
    </ItemGroup>
    <Target Name="AfterBuild" AfterTargets="Build">
        <Message Text="Run dotnet pack..." Importance="high" />
        <Exec Command="dotnet pack --configuration Debug --output $(PackageOutDir)" />
    </Target>
</Project>